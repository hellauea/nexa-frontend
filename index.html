<!DOCTYPE html>
<html>
<head>
<title>Nexa Core</title>
<style>
body {
  background:#05050a;
  color:#fff;
  font-family:Arial;
}
#chat { height:400px; overflow-y:auto; margin-bottom:10px; }
.msg { padding:8px; margin:5px 0; border-radius:6px; }
.user { background:#3b0764; text-align:right; }
.bot { background:#111827; }
button { background:#22d3ee; border:none; padding:8px; }
</style>
</head>
<body>

<h2>NEXA CORE</h2>
<div id="chat"></div>

<form id="form">
<input id="input" placeholder="Ask Nexa..." style="width:80%" />
<button>Send</button>
</form>

<script>
const API_URL = "https://nexa-ai-nd5x.onrender.com/ask";
const chat = document.getElementById("chat");
const form = document.getElementById("form");
const input = document.getElementById("input");

let history = [
  {
    role: "system",
    parts: [{
      text: "You are Nexa created by a cybersecurity student from REVA University Bangalore. Never say Google AI."
    }]
  }
];

function addMessage(text,type){
  const div = document.createElement("div");
  div.className = "msg " + type;
  div.innerText = text;
  chat.appendChild(div);
  chat.scrollTop = chat.scrollHeight;
}

form.onsubmit = async e => {
  e.preventDefault();
  const msg = input.value.trim();
  if(!msg) return;

  addMessage(msg,"user");
  input.value="";

  history.push({role:"user",parts:[{text:msg}]});

  try{
    const res = await fetch(API_URL,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({history})
    });
    const data = await res.json();
    addMessage(data.reply,"bot");
    history.push({role:"model",parts:[{text:data.reply}]});
  }catch{
    addMessage("Connection Error","bot");
  }
};

addMessage("Hello, I am Nexa. Ready to assist you.","bot");
</script>

</body>
</html>
