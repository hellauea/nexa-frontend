<!DOCTYPE html>
class="flex-1 bg-slate-800 p-4 rounded-xl outline-none">
<button class="bg-purple-600 px-5 rounded-xl">Send</button>
</form>
</footer>


<script>
const API_URL = "https://nexa-ai-nd5x.onrender.com/ask"; // ✅ YOUR REAL BACKEND


const chatContainer = document.getElementById('chat-container');
const typingIndicator = document.getElementById('typing-indicator');
const welcomeScreen = document.getElementById('welcome-screen');
const form = document.getElementById('chat-form');
const input = document.getElementById('user-input');


function scrollToBottom(){ chatContainer.scrollTop = chatContainer.scrollHeight; }
function showTyping(){ typingIndicator.classList.remove('hidden'); }
function hideTyping(){ typingIndicator.classList.add('hidden'); }


function addMessage(text, sender){
if(welcomeScreen) welcomeScreen.style.display = 'none';


const box = document.createElement('div');
box.className = sender === 'bot' ? 'text-left' : 'text-right';


box.innerHTML = `
<div class="inline-block max-w-[75%] px-4 py-3 rounded-2xl ${sender==='bot'
? 'bg-slate-800 text-slate-200'
: 'bg-purple-600 text-white'}">
${sender==='bot'? marked.parse(text):text}
</div>`;


chatContainer.appendChild(box);
scrollToBottom();
return box.querySelector('div');
}


form.addEventListener('submit', async e => {
e.preventDefault();
const msg = input.value.trim();
if(!msg) return;


addMessage(msg,'user');
input.value='';
showTyping();


const botBox = addMessage('', 'bot');


try{
const res = await fetch(API_URL,{
method:'POST',
headers:{'Content-Type':'application/json'},
body:JSON.stringify({ message: msg })
});


hideTyping();


const reader = res.body.getReader();
const decoder = new TextDecoder();
let full = '';


while(true){
const {value,done} = await reader.read();
if(done) break;
full += decoder.decode(value);
botBox.innerHTML = marked.parse(full);
scrollToBottom();
}


}catch(err){
hideTyping();
addMessage('⚠️ Backend connection failed','bot');
}
});
</script>
</body>
</html>
